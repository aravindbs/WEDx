{% extends "base.html" %}
{% import "bootstrap/utils.html" as utils %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Dashboard{% endblock %}
{% block body %}

                <div class="header header-filter" style="background-image: url('../static/assets/img/examples/city.jpg');"></div>
                <div class="profile-page w3-animate-opacity">
                       
                    <div class="main main-raised col-md-12">
                            <div class="profile-content col-md-3 text-left">

                                    <div class="row">
                                        <div class="profile">

                                          <div class="image center">
                                                <img src= "{{ image.image_path }}" alt="" class="img-rounded img-raised object-fit_cover" >
                                            </div>
                                            <div class="name">
                                                <h3 class="title">{{ profile.first_name}} {{ profile.last_name }}</h3>
                                                <h6><i class="fa fa-male fa-fw w3-margin-right w3-large w3-text-teal"></i>{{ age }}</h6>
                                                <h6><i class="fa fa-home fa-fw w3-margin-right w3-large w3-text-teal"></i> {{ profile.current_location }}</h6>
                                            </div>
                                            
                                        </div>
                                    </div>
                                    <div class="description text-center">
                                        <h4> About </h4>
                                        <p>{{ profile.about }} </p>
                                    </div>




                            </div>
                            <div class="container col-md-9">


                                    <div class="input-bar col-sm-12 text-center">
                                        <div class="input-bar-item width100">
                                            <form class="form-inline" action="/dashboard" method="POST">
                                               <div class="form-group">
                                                  <input type="text" name="text" value="" placeholder="Search" class="form-control width100">
                                              </div>
                                              <div class="form-group">
                                                <div class="input-bar-item">
                                                      <button class="btn btn-danger btn-round " type="submit" name="my-form">
                                                              <i class="material-icons">search</i>
                                                      </button>


                                                </div>
                                              </div>



                                              </form>
                                            <div>
                                              <a href="{{ url_for('advancedSearch') }}" class="btn btn-danger btn-round text-center">Advanced Search </a>
                                              <a href="{{ url_for('delete') }}" class="btn btn-danger btn-round text-center">Delete Account </a>

                                          </div>
                                        

                                          <div class="container col-md-12">
                                                <div class="left">
                                                        <br/>
                                                        {{ utils.flashed_messages() }}
                                                        <br/>
                                                        </div>
                                            <h3 class="title text-center"> <i class="material-icons"><i class="material-icons">message</i></i> Requests </h3> <hr>
                                      <table class="table">
                                        <thead>
                                            <tr>
                                               
                                                <th class="text-center">From</th>
                                            </tr>
                                        </thead>

                                            </form>
                                        </div>

                                        <tbody>
                                                {% for req in reqs %}
                                        <tr>
                                            <td> <a href="{{ url_for('viewProfile', user=req.from_username) }}"> {{req.from_username}} </a> </td>
                                            <td> <a href="{{ url_for('acceptRequest', rid = req.request_id) }}"> Accept </a> </td>
                                            <td> <a href="{{ url_for('rejectRequest', rid = req.request_id) }}"> Reject </a> </td>
                                        {% endfor %}
                                        <tbody>

                                        

                                        </table>
                                        </div>


                                          
                                          <div class="container col-md-12">
                                                <h3 class="title text-center"> <i class="material-icons"><i class="material-icons">message</i></i> Messages </h3> <hr>
                                          <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Time</th>
                                                    <th>From</th>
                                                    <th>Subject</th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                    {% for msg in msgs %}
                                            <tr>
                                                <td>{{ msg.timestamp }}</td>
                                                <td>{{ msg.sender_username }}</td>
                                                <td class="text-left">{{ msg.subject }}</td>
                                                <td class="text-center"> <a href="{{ url_for('replyMessage', mid = msg.msgid) }}"> View and Reply </a> </td>
                                                <td class="text-center"> <a href="{{ url_for('deleteMessage', mid = msg.msgid) }}"> Delete </a> </td>
                                            {% endfor %}
                                            <tbody>

                                            

                                            </table>
                                            </div>

                                           




                            </div>
                        </div>


                    </div>




{% endblock %}

                                            </tr>